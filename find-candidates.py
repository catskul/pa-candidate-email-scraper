#!/bin/python

import urllib
import urllib2
import os
import csv
import pprint 
from BeautifulSoup import BeautifulSoup

candidates_file_name = '2014CandidateList.csv'
candidates_url       = "http://www.portal.state.pa.us/portal/server.pt/gateway/PTARGS_0_160329_1397740_0_0_18/%s"%candidates_file_name
candidates_file      = None

def download( url ):
    req             = urllib2.Request( url )
    response        = urllib2.urlopen( req )
    candidates_file = open( candidates_file_name, 'rw' )
    candidates_file.write( response ) 
    candidates_file.seek(0)


if os.path.isfile( candidates_file_name ):
    candidates_file = open( candidates_file_name, 'r' )
else:
    download( "http://www.portal.state.pa.us/portal/http;//www.portal.state.pa.us;80/portal/server.pt/gateway/PTARGS_0_160329_1397740_0_0_18/2014CandidateList.csv" )

search_url = 'https://www.pavoterservices.state.pa.us/ElectionInfo/BasicSearch.aspx'

candidate_records = []

candidate_rows = csv.DictReader(candidates_file)

for row in candidate_rows:
    candidate_id    = row['Candidateidnum']
    print "candidate_id: %s"%(candidate_id)
    data            = 'ctl00_ContentPlaceHolder1_ToolkitScriptManager1_HiddenField=&__EVENTTARGET=ctl00%24ContentPlaceHolder1%24BSSearchButton&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUJMjIxNjI1Mjk4DxYCHg5Mb29rVXBNZXNzYWdlczLrDgABAAAA%2F%2F%2F%2F%2FwEAAAAAAAAADAIAAABOU3lzdGVtLkRhdGEsIFZlcnNpb249Mi4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5BQEAAAAVU3lzdGVtLkRhdGEuRGF0YVRhYmxlAwAAABlEYXRhVGFibGUuUmVtb3RpbmdWZXJzaW9uCVhtbFNjaGVtYQtYbWxEaWZmR3JhbQMBAQ5TeXN0ZW0uVmVyc2lvbgIAAAAJAwAAAAYEAAAAzwc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJ1dGYtMTYiPz4NCjx4czpzY2hlbWEgeG1sbnM9IiIgeG1sbnM6eHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIiB4bWxuczptc2RhdGE9InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206eG1sLW1zZGF0YSI%2BDQogIDx4czplbGVtZW50IG5hbWU9IlRhYmxlIj4NCiAgICA8eHM6Y29tcGxleFR5cGU%2BDQogICAgICA8eHM6c2VxdWVuY2U%2BDQogICAgICAgIDx4czplbGVtZW50IG5hbWU9Ik1lc3NhZ2VDb2RlIiB0eXBlPSJ4czpzdHJpbmciIG1zZGF0YTp0YXJnZXROYW1lc3BhY2U9IiIgLz4NCiAgICAgICAgPHhzOmVsZW1lbnQgbmFtZT0iZW4tVVMiIHR5cGU9InhzOnN0cmluZyIgbXNkYXRhOnRhcmdldE5hbWVzcGFjZT0iIiBtaW5PY2N1cnM9IjAiIC8%2BDQogICAgICAgIDx4czplbGVtZW50IG5hbWU9ImVzLU1YIiB0eXBlPSJ4czpzdHJpbmciIG1zZGF0YTp0YXJnZXROYW1lc3BhY2U9IiIgbWluT2NjdXJzPSIwIiAvPg0KICAgICAgPC94czpzZXF1ZW5jZT4NCiAgICA8L3hzOmNvbXBsZXhUeXBlPg0KICA8L3hzOmVsZW1lbnQ%2BDQogIDx4czplbGVtZW50IG5hbWU9Ik5ld0RhdGFTZXQiIG1zZGF0YTpJc0RhdGFTZXQ9InRydWUiIG1zZGF0YTpNYWluRGF0YVRhYmxlPSJUYWJsZSIgbXNkYXRhOlVzZUN1cnJlbnRMb2NhbGU9InRydWUiPg0KICAgIDx4czpjb21wbGV4VHlwZT4NCiAgICAgIDx4czpjaG9pY2UgbWluT2NjdXJzPSIwIiBtYXhPY2N1cnM9InVuYm91bmRlZCIgLz4NCiAgICA8L3hzOmNvbXBsZXhUeXBlPg0KICAgIDx4czp1bmlxdWUgbmFtZT0iQ29uc3RyYWludDEiIG1zZGF0YTpQcmltYXJ5S2V5PSJ0cnVlIj4NCiAgICAgIDx4czpzZWxlY3RvciB4cGF0aD0iLi8vVGFibGUiIC8%2BDQogICAgICA8eHM6ZmllbGQgeHBhdGg9Ik1lc3NhZ2VDb2RlIiAvPg0KICAgIDwveHM6dW5pcXVlPg0KICA8L3hzOmVsZW1lbnQ%2BDQo8L3hzOnNjaGVtYT4GBQAAAO8EPGRpZmZncjpkaWZmZ3JhbSB4bWxuczptc2RhdGE9InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206eG1sLW1zZGF0YSIgeG1sbnM6ZGlmZmdyPSJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnhtbC1kaWZmZ3JhbS12MSI%2BDQogIDxOZXdEYXRhU2V0Pg0KICAgIDxUYWJsZSBkaWZmZ3I6aWQ9IlRhYmxlMSIgbXNkYXRhOnJvd09yZGVyPSIwIj4NCiAgICAgIDxNZXNzYWdlQ29kZT5FSV9CYXNpY1NlYXJjaEhlYWRlckxhYmVsPC9NZXNzYWdlQ29kZT4NCiAgICAgIDxlbi1VUz5DYW5kaWRhdGUgYW5kIENhbXBhaWduIEZpbmFuY2UgQ29tbWl0dGVlIEJhc2ljIFNlYXJjaDwvZW4tVVM%2BDQogICAgICA8ZXMtTVggLz4NCiAgICA8L1RhYmxlPg0KICAgIDxUYWJsZSBkaWZmZ3I6aWQ9IlRhYmxlMiIgbXNkYXRhOnJvd09yZGVyPSIxIj4NCiAgICAgIDxNZXNzYWdlQ29kZT5FSV9BZHZhbmNlZFNlYXJjaEhlYWRlckxhYmVsPC9NZXNzYWdlQ29kZT4NCiAgICAgIDxlbi1VUz5DYW5kaWRhdGUgYW5kIENhbXBhaWduIEZpbmFuY2UgQ29tbWl0dGVlIEFkdmFuY2VkIFNlYXJjaDwvZW4tVVM%2BDQogICAgICA8ZXMtTVggLz4NCiAgICA8L1RhYmxlPg0KICA8L05ld0RhdGFTZXQ%2BDQo8L2RpZmZncjpkaWZmZ3JhbT4EAwAAAA5TeXN0ZW0uVmVyc2lvbgQAAAAGX01ham9yBl9NaW5vcgZfQnVpbGQJX1JldmlzaW9uAAAAAAgICAgCAAAAAAAAAP%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FCxYCZg9kFgICAw9kFgYCAw9kFgICBw8PFgIeC05hdmlnYXRlVXJsBSl%2BL0VsZWN0aW9uSW5mby9Gb290ZXJMaW5rUmVwb3J0LmFzcHg%2FSUQ9MWRkAgUPZBYCAgcPZBYCZg9kFg4CBQ9kFggCBQ8QZGQWAGQCCQ8QZGQWAGQCDQ8QZGQWAGQCDw8QZGQWAGQCCQ8WAh4HVmlzaWJsZWhkAgsPFgUWAhYFDxYCHwJoZGQUKwACFgIeC2NsaWVudFN0YXRlPCsABABkZGRkD2QWBw9mFgMWBh4CRjAFBG5hbWUeA0dGMRsAAAAAAABkQAEAAAAeDmhpZGRlbkludGVybmFsCymLAUluZnJhZ2lzdGljcy5XZWIuVUkuRGVmYXVsdGFibGVCb29sZWFuLCBJbmZyYWdpc3RpY3MzNS5XZWIudjEwLjIsIFZlcnNpb249MTAuMi4yMDEwMi4xMDExLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTdkZDVjMzE2M2YyY2QwY2IAZGQPAgEWAxYMHgRCREYzBQ1TeXN0ZW0uU3RyaW5nHgNHRjAFE0NvbHVtbkxldmVsQ3NzQ2xhc3MeBEJERjAFB0NTdGF0dXMfBAUHQ1N0YXR1cx8FGwAAAAAAgFFAAQAAAB8GCysEAGRkDwICFgMWDB8HBQ1TeXN0ZW0uU3RyaW5nHwgFE0NvbHVtbkxldmVsQ3NzQ2xhc3MfCQUKT2ZmaWNlTmFtZR8EBQpPZmZpY2VOYW1lHwUbAAAAAAAAZEABAAAAHwYLKwQAZGQPAgMWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQxEaXN0cmljdE5hbWUfBAUMRGlzdHJpY3ROYW1lHwUbAAAAAAAAZEABAAAAHwYLKwQAZGQPAgQWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQlQYXJ0eU5hbWUfBAUJUGFydHlOYW1lHwUbAAAAAAAAVEABAAAAHwYLKwQAZGQPAgUWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQxFbGVjdGlvbk5hbWUfBAUMRWxlY3Rpb25OYW1lHwUbAAAAAAAAZEABAAAAHwYLKwQAZGQPAgYWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQhJRE51bWJlch8EBQhJRE51bWJlch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BhcnR5TmFtZR8FGwAAAAAAAFRAAQAAAB8GCysEAGRkDwIFFgMWDB8HBQ1TeXN0ZW0uU3RyaW5nHwgFE0NvbHVtbkxldmVsQ3NzQ2xhc3MfCQUMRWxlY3Rpb25OYW1lHwQFDEVsZWN0aW9uTmFtZR8FGwAAAAAAAGRAAQAAAB8GCysEAGRkDwIGFgMWDB8HBQ1TeXN0ZW0uU3RyaW5nHwgFE0NvbHVtbkxldmVsQ3NzQ2xhc3MfCQUISUROdW1iZXIfBAUISUROdW1iZXIfBRsAAAAAAABUQAEAAAAfBgsrBABkZGRkZGQCGw8WBRYCFgVkZBQrAAIWAh8DPCsABABkZGRkD2QWCw9mFgMWDB8HBQ1TeXN0ZW0uU3RyaW5nHwgFE0NvbHVtbkxldmVsQ3NzQ2xhc3MfCQUETmFtZR8EBQROYW1lHwUbAAAAAAAAZEABAAAAHwYLKwQAZGQPAgEWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQVDVHlwZR8EBQVDVHlwZR8FGwAAAAAAAERAAQAAAB8GCysEAGRkDwICFgMWDB8HBQ1TeXN0ZW0uU3RyaW5nHwgFE0NvbHVtbkxldmVsQ3NzQ2xhc3MfCQUHQ1N0YXR1cx8EBQdDU3RhdHVzHwUbAAAAAACAVkABAAAAHwYLKwQAZGQPAgMWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQhJRE51bWJlch8EBQhJRE51bWJlch8FGwAAAAAAgFFAAQAAAB8GCysEAGRkDwIEFgMWDB8HBQ1TeXN0ZW0uU3RyaW5nHwgFE0NvbHVtbkxldmVsQ3NzQ2xhc3MfCQUKT2ZmaWNlTmFtZR8EBQpPZmZpY2VOYW1lHwUbAAAAAADAZ0ABAAAAHwYLKwQAZGQPAgUWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQxEaXN0cmljdE5hbWUfBAUMRGlzdHJpY3ROYW1lHwUbAAAAAAAAZEABAAAAHwYLKwQAZGQPAgYWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQlQYXJ0eU5hbWUfBAUJUGFydHlOYW1lHwUbAAAAAAAAVEABAAAAHwYLKwQAZGQPAgcWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQxFbGVjdGlvbk5hbWUfBAUMRWxlY3Rpb25OYW1lHwUbAAAAAAAAZEABAAAAHwYLKwQAZGQPAggWAxYMHwcFDVN5c3RlbS5TdHJpbmcfCAUTQ29sdW1uTGV2ZWxDc3NDbGFzcx8JBQVUTmFtZR8EBQVUTmFtZR8FGwAAAAAAAGRAAQAAAB8GCysEAGRkDwIJFgMWDB8HBQ1TeXN0ZW0uU3RyaW5nHwgFE0NvbHVtbkxldmVsQ3NzQ2xhc3MfCQUFQ05hbWUfBAUFQ05hbWUfBRsAAAAAAABkQAEAAAAfBgsrBABkZA8CChYDFgwfBwUNU3lzdGVtLlN0cmluZx8IBRNDb2x1bW5MZXZlbENzc0NsYXNzHwkFEVN1cHBvcnRlZENhbmROYW1lHwQFEVN1cHBvcnRlZENhbmROYW1lHwUbAAAAAAAAZEABAAAAHwYLKwQAZGRkZGRkAgsPDxYCHhZGb290ZXJJY29uSW1hZ2VzR2xvYmFsMpgTAAEAAAD%2F%2F%2F%2F%2FAQAAAAAAAAAMAgAAAEhBcHBfV2ViUmVmZXJlbmNlcywgVmVyc2lvbj0wLjAuMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPW51bGwMAwAAAE5TeXN0ZW0uRGF0YSwgVmVyc2lvbj0yLjAuMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWI3N2E1YzU2MTkzNGUwODkMBAAAAElTeXN0ZW0sIFZlcnNpb249Mi4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5BQEAAAAhU3J2U3lzdGVtU2V0dGluZ3MuUmVzdWx0U3RydWN0dXJlCwAAAA5CeXRlQXJyYXlGaWVsZBFFcnJvck1lc3NhZ2VGaWVsZBBFcnJvck51bWJlckZpZWxkD0lkZW50aXRpZXNGaWVsZA1JZGVudGl0eUZpZWxkDE1lc3NhZ2VGaWVsZBFTZWxlY3RlZFJvd3NGaWVsZBBTZWxlY3RlZFhNTEZpZWxkC1N0YXR1c0ZpZWxkDldIRU5fUkVBREZpZWxkD1Byb3BlcnR5Q2hhbmdlZAcBAAEBAQQBAAEEAggTU3lzdGVtLkRhdGEuRGF0YVNldAMAAAAIMVN5c3RlbS5Db21wb25lbnRNb2RlbC5Qcm9wZXJ0eUNoYW5nZWRFdmVudEhhbmRsZXIEAAAAAgAAAAoKAAAAAAYFAAAAHzxJREVOVElUWT48SUQ%2BMDwvSUQ%2BPC9JREVOVElUWT4GBgAAAAEwBgcAAAAHMTMwMTAwMAkIAAAABgkAAAAAAQAAAAYKAAAAE01heSAxMSAyMDE0ICAzOjQ4UE0KBQgAAAATU3lzdGVtLkRhdGEuRGF0YVNldAMAAAAXRGF0YVNldC5SZW1vdGluZ1ZlcnNpb24JWG1sU2NoZW1hC1htbERpZmZHcmFtAwEBDlN5c3RlbS5WZXJzaW9uAwAAAAkLAAAABgwAAACMCDw%2FeG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9InV0Zi0xNiI%2FPg0KPHhzOnNjaGVtYSBpZD0iTmV3RGF0YVNldCIgeG1sbnM9IiIgeG1sbnM6eHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIiB4bWxuczptc2RhdGE9InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206eG1sLW1zZGF0YSI%2BDQogIDx4czplbGVtZW50IG5hbWU9Ik5ld0RhdGFTZXQiIG1zZGF0YTpJc0RhdGFTZXQ9InRydWUiIG1zZGF0YTpMb2NhbGU9IiI%2BDQogICAgPHhzOmNvbXBsZXhUeXBlPg0KICAgICAgPHhzOmNob2ljZSBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0idW5ib3VuZGVkIj4NCiAgICAgICAgPHhzOmVsZW1lbnQgbmFtZT0iVGFibGUiPg0KICAgICAgICAgIDx4czpjb21wbGV4VHlwZT4NCiAgICAgICAgICAgIDx4czpzZXF1ZW5jZT4NCiAgICAgICAgICAgICAgPHhzOmVsZW1lbnQgbmFtZT0iUEFWT1RFUl9CUk9XU0VSX0lDT05fUEFUSCIgdHlwZT0ieHM6c3RyaW5nIiBtc2RhdGE6dGFyZ2V0TmFtZXNwYWNlPSIiIG1pbk9jY3Vycz0iMCIgLz4NCiAgICAgICAgICAgICAgPHhzOmVsZW1lbnQgbmFtZT0iUEFWT1RFUl9JQ09OX0hFSUdIVCIgdHlwZT0ieHM6c3RyaW5nIiBtc2RhdGE6dGFyZ2V0TmFtZXNwYWNlPSIiIG1pbk9jY3Vycz0iMCIgLz4NCiAgICAgICAgICAgICAgPHhzOmVsZW1lbnQgbmFtZT0iUEFWT1RFUl9JQ09OX1dJRFRIIiB0eXBlPSJ4czpzdHJpbmciIG1zZGF0YTp0YXJnZXROYW1lc3BhY2U9IiIgbWluT2NjdXJzPSIwIiAvPg0KICAgICAgICAgICAgICA8eHM6ZWxlbWVudCBuYW1lPSJQQVZPVEVSX0JST1dTRVJfSUNPTl9URVhUIiB0eXBlPSJ4czpzdHJpbmciIG1zZGF0YTp0YXJnZXROYW1lc3BhY2U9IiIgbWluT2NjdXJzPSIwIiAvPg0KICAgICAgICAgICAgPC94czpzZXF1ZW5jZT4NCiAgICAgICAgICA8L3hzOmNvbXBsZXhUeXBlPg0KICAgICAgICA8L3hzOmVsZW1lbnQ%2BDQogICAgICA8L3hzOmNob2ljZT4NCiAgICA8L3hzOmNvbXBsZXhUeXBlPg0KICA8L3hzOmVsZW1lbnQ%2BDQo8L3hzOnNjaGVtYT4GDQAAAKgEPGRpZmZncjpkaWZmZ3JhbSB4bWxuczptc2RhdGE9InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206eG1sLW1zZGF0YSIgeG1sbnM6ZGlmZmdyPSJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnhtbC1kaWZmZ3JhbS12MSI%2BPE5ld0RhdGFTZXQ%2BPFRhYmxlIGRpZmZncjppZD0iVGFibGUxIiBtc2RhdGE6cm93T3JkZXI9IjAiPjxQQVZPVEVSX0JST1dTRVJfSUNPTl9QQVRIPn4vSW1hZ2VzL0lFLmdpZjt%2BL0ltYWdlcy9jaHJvbWUuZ2lmO34vSW1hZ2VzL2ZpcmVmb3guZ2lmO34vSW1hZ2VzL3NhZmFyaS5naWY8L1BBVk9URVJfQlJPV1NFUl9JQ09OX1BBVEg%2BPFBBVk9URVJfSUNPTl9IRUlHSFQ%2BMjA8L1BBVk9URVJfSUNPTl9IRUlHSFQ%2BPFBBVk9URVJfSUNPTl9XSURUSD4yMDwvUEFWT1RFUl9JQ09OX1dJRFRIPjxQQVZPVEVSX0JST1dTRVJfSUNPTl9URVhUPlRoaXMgd2Vic2l0ZSBpcyBjb21wYXRpYmxlIHdpdGggdGhlIGZvbGxvd2luZyBicm93c2Vyczo8L1BBVk9URVJfQlJPV1NFUl9JQ09OX1RFWFQ%2BPC9UYWJsZT48L05ld0RhdGFTZXQ%2BPC9kaWZmZ3I6ZGlmZmdyYW0%2BBAsAAAAOU3lzdGVtLlZlcnNpb24EAAAABl9NYWpvcgZfTWlub3IGX0J1aWxkCV9SZXZpc2lvbgAAAAAICAgIAgAAAAAAAAD%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwtkFggCAQ8PFgIfAmhkZAIDDw8WAh8CaGRkAgcPDxYCHwEFF2h0dHA6Ly93d3cuc3RhdGUucGEudXMvZGQCCQ8PFgIfAQU4aHR0cDovL3d3dy5wYS5nb3YvUGFnZXMvUHJpdmFjeS1Qb2xpY3kuYXNweCMuVXZ3NlZXSmRXQWdkZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAgUSY3RsMDAkX2lnX2RlZl9lcF9uBRJjdGwwMCRfaWdfZGVmX2VwX2ROg%2BNgACgpcv515QOxuhcb8PWvxw%3D%3D&__EVENTVALIDATION=%2FwEWBQKrqYj5CgK46L2cDQLz8b%2BCDQL7iYLYDAKgyaBtNLpmn47G9lBsTfNjVp5Hio%2FVjPs%3D&ctl00%24ContentPlaceHolder1%24txtNameID=' + candidate_id + '&ctl00%24_IG_CSS_LINKS_=..%2FApp_Themes%2FTheme1%2FStyleSheet.css%7C..%2FApp_Themes%2FTheme1%2Fcontentslider.css%7C..%2FApp_Themes%2FTheme1%2Fig_dataGrid.css%7C..%2Fig_res%2FDefault%2Fig_texteditor.css%7C..%2Fig_res%2FDefault%2Fig_shared.css'
    req             = urllib2.Request(search_url, data)
    response        = urllib2.urlopen(req)
    result_page     = response.read()
    #print result_page
    soup            = BeautifulSoup( result_page )
    candidate_arg   = soup.find( "a", id='ctl00_ContentPlaceHolder1_dgSearchResults_it0_0_hlnkRpt' )['href']
    candidate_url   = 'https://www.pavoterservices.state.pa.us/ElectionInfo/%s'%(candidate_arg)

    print candidate_url
    req             = urllib2.Request( candidate_url )
    response        = urllib2.urlopen( req )
    candidate_page  = response.read()
    soup            = BeautifulSoup( candidate_page )
    candidate_header= soup.find( "span", id="ctl00_ContentPlaceHolder1_VRSHeading1" ).string
    candidate_name  = candidate_header.split('-')[1]
    print candidate_name
    candidate_email = soup.find( "span", id="ctl00_ContentPlaceHolder1_tabs_TabPanel1_lblEmail" ).string
    candidate_record = row
        
    candidate_record[ 'name'  ] = candidate_name
    candidate_record[ 'email' ] = candidate_email
    candidate_records.append( candidate_record )
    pprint.pprint( candidate_record )

#data = urllib.urlencode(values)



